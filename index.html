<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Chủ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom font for better aesthetics */
        body {
            font-family: 'Inter', sans-serif;
            /* Changed background to support aurora effect from music.html */
            background: #0d1a2a; /* Dark base color */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            color: #ecf0f1; /* Default light text color for body */
            position: relative; /* For positioning aurora layers */
            /* Removed perspective: 1000px; as it's not needed here */
        }

        /* Aurora Borealis Effect - Copied from music.html */
        .aurora-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allow clicks to pass through */
            z-index: -1; /* Place behind content */
            background: transparent;
            overflow: hidden; /* Keep hidden for aurora layers to prevent inner scroll */
        }

        .aurora-layer {
            position: absolute;
            background: linear-gradient(to bottom,
                rgba(52, 152, 219, 0.3), /* Blue from active playlist item */
                rgba(46, 204, 113, 0.3)  /* Green from active playlist item */
            );
            border-radius: 50%;
            filter: blur(80px); /* Soft blur for aurora effect */
            opacity: 0;
            animation: auroraMovement 20s infinite alternate ease-in-out;
        }

        .aurora-layer:nth-child(1) {
            width: 600px;
            height: 600px;
            top: 10%;
            left: 15%;
            background: linear-gradient(to bottom, rgba(52, 152, 219, 0.4), rgba(46, 204, 113, 0.4));
            animation-delay: 0s;
            animation-duration: 25s;
        }

        .aurora-layer:nth-child(2) {
            width: 700px;
            height: 700px;
            top: 50%;
            left: 70%;
            background: linear-gradient(to top, rgba(0, 200, 200, 0.4), rgba(0, 150, 150, 0.4)); /* Teal tones */
            animation-delay: 5s;
            animation-duration: 20s;
        }

        .aurora-layer:nth-child(3) {
            width: 500px;
            height: 500px;
            top: 80%;
            left: 30%;
            background: linear-gradient(to right, rgba(70, 130, 180, 0.3), rgba(60, 179, 113, 0.3)); /* SteelBlue to MediumSeaGreen */
            animation-delay: 10s;
            animation-duration: 30s;
        }

        .aurora-layer:nth-child(4) {
            width: 400px;
            height: 400px;
            top: 20%;
            left: 80%;
            background: linear-gradient(to left, rgba(135, 206, 250, 0.3), rgba(127, 255, 212, 0.3)); /* LightSkyBlue to Aquamarine */
            animation-delay: 15s;
            animation-duration: 22s;
        }

        @keyframes auroraMovement {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 0.5;
            }
            25% {
                transform: translate(20px, -30px) scale(1.05);
                opacity: 0.7;
            }
            50% {
                transform: translate(-10px, 40px) scale(0.95);
                opacity: 0.6;
            }
            75% {
                transform: translate(30px, -20px) scale(1.03);
                opacity: 0.8;
            }
            100% {
                transform: translate(0, 0) scale(1);
                opacity: 0.5;
            }
        }

        /* New: Global entrance animation for the container */
        @keyframes fadeInSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .container {
            background-color: rgba(44, 62, 80, 0.8); /* Slightly lighter dark container background with transparency */
            border-radius: 16px; /* More rounded corners */
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4); /* More prominent, softer shadow */
            padding: 30px;
            max-width: 650px; /* Adjusted max-width for homepage content to allow more space for buttons */
            width: 100%;
            text-align: center;
            border: 1px solid rgba(61, 90, 115, 0.5); /* Subtle border for depth with transparency */
            backdrop-filter: blur(10px); /* Stronger blur effect for a modern touch */
            -webkit-backdrop-filter: blur(10px); /* For Safari */
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smooth transition for any changes */
            opacity: 0; /* Start hidden for the animation */
            animation: fadeInSlideUp 0.8s ease-out forwards; /* Apply on load */
            z-index: 1; /* Ensure container is above aurora effect */
            /* Removed transform-style: preserve-3d; as it's not needed here */
        }
        h1 {
            color: #ecf0f1; /* Light heading color */
            font-size: 2.2rem; /* Adjusted font size to match other pages */
            font-weight: 700;
            margin-bottom: 2rem; /* Adjusted margin to match other pages */
            text-shadow: 0 2px 6px rgba(0,0,0,0.4); /* Slightly deeper text shadow for more prominence */
        }
        p {
            color: #bdc3c7; /* Lighter muted paragraph text */
            font-size: 1.05rem; /* Adjusted font size to match other pages */
            line-height: 1.7; /* Increased line height for better readability */
            margin-bottom: 2.5rem; /* Adjusted margin to match other pages */
        }
        .button-group {
            display: flex;
            flex-direction: column; /* Stack buttons vertically by default */
            gap: 1.5rem; /* Increased space between buttons */
            margin-top: 3rem; /* More space above button group */
            margin-bottom: 3rem; /* More space below button group before author */
        }
        .app-button {
            background: linear-gradient(to right, #3498db, #2980b9); /* Vibrant blue gradient */
            color: white;
            cursor: pointer;
            font-weight: 700; /* Bolder text */
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4); /* More prominent button shadow */
            letter-spacing: 0.05em; /* Slight letter spacing */
            text-transform: uppercase; /* Uppercase for button text */
            border-radius: 10px; /* More rounded */
            padding: 18px 28px; /* Increased padding for a larger feel */
            font-size: 1.2rem; /* Larger font size */
            border: none; /* Remove default border */
            transition: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother, slightly springy transition */
            text-shadow: 0 1px 2px rgba(0,0,0,0.2); /* Subtle text shadow */
            display: block; /* Ensure button takes full width in column layout */
            width: 100%;
        }
        .app-button:hover {
            background: linear-gradient(to right, #2980b9, #3498db); /* Slightly darker and reversed gradient on hover */
            transform: translateY(-4px) scale(1.015); /* Gentle lift and slight scale */
            box-shadow: 0 12px 28px rgba(52, 152, 219, 0.7); /* Larger, more vibrant shadow on hover */
        }
        .app-button:active {
            transform: translateY(0) scale(0.97); /* Gentle press effect, slightly more pronounced shrink */
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
            background: #2471a3;
        }

        /* Removed pulseEffect from container as per other pages' style */
        /* .container.pulse { ... } */
        /* @keyframes pulseEffect { ... } */

        .author-text {
            color: #8c9ba5; /* Slightly darker, more subtle text for author */
            font-size: 1rem; /* Slightly larger author text */
            margin-top: 2rem; /* More space above author text */
        }

        /* Music Player Floating Button */
        .music-player-floating-button-wrapper {
            position: fixed; /* Fixed position relative to the viewport */
            bottom: 30px; /* 30px from the bottom */
            left: 30px; /* 30px from the left */
            z-index: 1000; /* Ensure it's above all other content */
            display: flex;
            align-items: flex-end; /* Align tooltip to the bottom of the button */
            justify-content: flex-start; /* Align tooltip to the left of the button */
        }

        .music-player-floating-button {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            width: 60px; /* Smaller size */
            height: 60px; /* Smaller size */
            border-radius: 50%; /* Circular button */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem; /* Icon size */
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
            transition: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative; /* For tooltip positioning */
            z-index: 1; /* Ensure button is above tooltip when active */
        }

        .music-player-floating-button:hover {
            background: linear-gradient(to right, #2980b9, #3498db);
            transform: translateY(-3px) scale(1.05); /* Gentle lift and slight scale */
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.6);
        }

        .music-player-floating-button:active {
            transform: translateY(0) scale(0.95); /* Gentle press effect */
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
            background: #2471a3;
        }

        /* Custom Tooltip Styles */
        .music-tooltip {
            position: absolute;
            left: 70px; /* Position to the right of the button */
            bottom: 50%; /* Vertically center with the button */
            transform: translateY(50%); /* Adjust for vertical centering */
            background-color: rgba(44, 62, 80, 0.95); /* Darker background with transparency */
            color: #ecf0f1;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            white-space: nowrap; /* Prevent text wrapping */
            opacity: 0; /* Hidden by default */
            visibility: hidden; /* Hidden by default */
            transition: opacity 0.3s ease, visibility 0.3s ease;
            font-size: 0.95rem;
            pointer-events: none; /* Allow clicks to pass through */
            border: 1px solid #3d5a73; /* Subtle border */
            backdrop-filter: blur(3px); /* Subtle blur for the tooltip */
            -webkit-backdrop-filter: blur(3px); /* For Safari */
            display: flex; /* Use flexbox for layout inside tooltip */
            align-items: center; /* Vertically align items */
            gap: 10px; /* Space between image and text */
        }

        .music-tooltip img {
            width: 50px; /* Size of the album cover */
            height: 50px;
            border-radius: 4px; /* Slightly rounded corners for the image */
            object-fit: cover; /* Ensure the image covers the area without distortion */
            flex-shrink: 0; /* Prevent image from shrinking */
        }

        .music-tooltip-content {
            display: flex;
            flex-direction: column;
            text-align: left;
        }

        .music-tooltip-content .song-title {
            font-weight: bold;
            font-size: 1rem;
            color: #ecf0f1;
        }

        .music-tooltip-content .song-details {
            font-size: 0.85rem;
            color: #bdc3c7;
        }

        .music-player-floating-button-wrapper:hover .music-tooltip {
            opacity: 1;
            visibility: visible;
        }

        /* Responsive adjustments for larger screens (desktop) */
        @media (min-width: 768px) {
            .button-group {
                display: grid; /* Change to grid for better control */
                grid-template-columns: repeat(2, 1fr); /* Two columns, equal width */
                gap: 2rem; /* Larger gap for more breathing room */
                max-width: 550px; /* Constrain grid width to align with content */
                margin-left: auto; /* Center the grid */
                margin-right: auto; /* Center the grid */
            }
            .app-button {
                width: auto; /* Let grid handle width */
                max-width: none; /* Remove previous max-width constraint */
                padding: 22px; /* Even more padding for a grander feel */
                font-size: 1.3rem; /* Larger font */
            }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="aurora-background">
        <div class="aurora-layer"></div>
        <div class="aurora-layer"></div>
        <div class="aurora-layer"></div>
        <div class="aurora-layer"></div>
    </div>

    <div class="container" id="homepageContainer">
        <h1>Chào mừng đến với các công cụ hay ho của Khonlouis!</h1>
        <p>Khám phá các công cụ tính toán mạnh mẽ cho hình học, đạo hàm và hệ phương trình tuyến tính. Giao diện trực quan và dễ sử dụng, giúp bạn giải quyết các bài toán phức tạp một cách hiệu quả.</p>

        <div class="button-group">
            <a href="luong_giac6.html" class="app-button">Tỉ Số Lượng Giác</a>
            <a href="dao_ham.html" class="app-button">Tính Đạo Hàm</a>
            <a href="hpt.html" class="app-button">Giải Hệ Phương Trình</a>
            <a href="pt_bac_2.html" class="app-button">Phương Trình Bậc Hai</a>
            <a href="hinh_hoc.html" class="app-button">Hình Học</a>
        </div>

        <p class="author-text">Tác giả: khonlouis</p>
    </div>

    <!-- Music Player Button Wrapper for Tooltip -->
    <div class="music-player-floating-button-wrapper">
        <a href="music.html" class="music-player-floating-button" id="musicButton">
            <i class="fas fa-music"></i>
        </a>
        <div class="music-tooltip" id="musicTooltip">
            <!-- Album cover image -->
            <img id="albumCover" src="" alt="Album Cover">
            <div class="music-tooltip-content">
                <span class="song-title" id="songTitle"></span>
                <span class="song-details" id="songDetails"></span>
            </div>
        </div>
    </div>

    <!-- Hidden Audio Player -->
    <audio id="audioPlayer" src="" preload="auto"></audio>

    <script>
        // Removed pulse effect from the container on initial load for consistency
        // window.onload = function() {
        //     const container = document.getElementById('homepageContainer');
        //     container.classList.add('pulse');
        // };

        // Music Player Logic - Kept as requested
        window.onload = function() {
            const container = document.getElementById('homepageContainer');
            // Apply fadeInSlideUp animation on load
            container.style.opacity = 0; // Ensure it starts hidden
            container.style.transform = 'translateY(20px)'; // Start slightly below
            setTimeout(() => {
                container.style.opacity = 1;
                container.style.transform = 'translateY(0)';
            }, 100); // Small delay to ensure CSS is applied before animation

            const audioPlayer = document.getElementById('audioPlayer');
            const musicTooltip = document.getElementById('musicTooltip');
            const albumCoverImg = document.getElementById('albumCover');
            const songTitleSpan = document.getElementById('songTitle');
            const songDetailsSpan = document.getElementById('songDetails');

            // --- Music Player Logic ---
            const SONGS = [
                {
                    id: 'song1',
                    title: "Hạnh Phúc Mới",
                    artist: "Khonlouis",
                    album: "Những Ngày Mưa",
                    url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3", // Placeholder URL
                    albumArtUrl: "https://placehold.co/50x50/3498db/ffffff?text=Album1"
                },
                {
                    id: 'song2',
                    title: "Die For You",
                    artist: "Joji",
                    album: "SMITHEREENS",
                    url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3", // Placeholder URL
                    albumArtUrl: "https://placehold.co/50x50/e74c3c/ffffff?text=Album2"
                },
                {
                    id: 'song3',
                    title: "Blinding Lights",
                    artist: "The Weeknd",
                    album: "After Hours",
                    url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3", // Placeholder URL
                    albumArtUrl: "https://placehold.co/50x50/2ecc71/ffffff?text=Album3"
                }
            ];

            function saveMusicState() {
                const currentSongId = audioPlayer.dataset.currentSongId;
                if (currentSongId) {
                    const state = {
                        songId: currentSongId,
                        currentTime: audioPlayer.currentTime,
                        isPlaying: !audioPlayer.paused
                    };
                    localStorage.setItem('musicPlayerState', JSON.stringify(state));
                } else {
                    // If no song is selected, clear the state
                    localStorage.removeItem('musicPlayerState');
                }
            }

            function loadMusicState() {
                const savedState = localStorage.getItem('musicPlayerState');
                if (savedState) {
                    const state = JSON.parse(savedState);
                    const song = SONGS.find(s => s.id === state.songId);
                    if (song) {
                        audioPlayer.src = song.url;
                        audioPlayer.dataset.currentSongId = song.id; // Store current song ID

                        if (state.isPlaying) {
                            audioPlayer.currentTime = state.currentTime;
                            // Attempt to play, but handle browser autoplay policy
                            audioPlayer.play().then(() => {
                                updateTooltip(song); // Show song info if playing successfully
                            }).catch(error => {
                                console.log("Autoplay prevented:", error);
                                // Inform user that they need to interact to play audio
                                updateTooltip({
                                    title: "Nhấn nút nhạc để phát!",
                                    artist: "Trình duyệt đã chặn tự động phát.",
                                    album: "",
                                    albumArtUrl: "https://placehold.co/50x50/7f8c8d/ffffff?text=Play"
                                });
                            });
                        } else {
                            // If it was paused, or not playing, show default "Chưa có nhạc"
                            updateTooltip({
                                title: "Chưa có nhạc",
                                artist: "Hãy chọn bài hát từ trang nhạc",
                                album: "",
                                albumArtUrl: "https://placehold.co/50x50/95a5a6/ffffff?text=Music"
                            });
                            audioPlayer.currentTime = 0; // Ensure time is reset
                        }
                    } else {
                        // If song not found in current SONGS list (e.g., song removed), reset to default
                        updateTooltip({
                            title: "Chưa có nhạc",
                            artist: "Hãy chọn bài hát từ trang nhạc",
                            album: "",
                            albumArtUrl: "https://placehold.co/50x50/95a5a6/ffffff?text=Music"
                        });
                        localStorage.removeItem('musicPlayerState'); // Clear invalid state
                        audioPlayer.src = ""; // Clear audio source
                        audioPlayer.currentTime = 0;
                    }
                } else {
                    // Default state if no music was previously playing
                    updateTooltip({
                        title: "Chưa có nhạc",
                        artist: "Hãy chọn bài hát từ trang nhạc",
                        album: "",
                        albumArtUrl: "https://placehold.co/50x50/95a5a6/ffffff?text=Music"
                    });
                }
            }

            function updateTooltip(song) {
                albumCoverImg.src = song.albumArtUrl;
                albumCoverImg.alt = `Ảnh bìa album của ${song.title}`;
                songTitleSpan.textContent = song.title;
                songDetailsSpan.textContent = `${song.artist} ${song.album ? '(Album: "' + song.album + '")' : ''}`;
            }

            // Event listeners for audio player to save state
            audioPlayer.addEventListener('timeupdate', saveMusicState);
            audioPlayer.addEventListener('play', saveMusicState);
            audioPlayer.addEventListener('pause', saveMusicState);
            audioPlayer.addEventListener('ended', () => {
                saveMusicState(); // Save state when song ends
                // Optionally, play next song or reset tooltip
                updateTooltip({
                    title: "Đã kết thúc",
                    artist: "Chọn bài hát khác",
                    album: "",
                    albumArtUrl: "https://placehold.co/50x50/95a5a6/ffffff?text=Done"
                });
            });

            // Load music state when the page loads
            loadMusicState();

            // --- End Music Player Logic ---
        };
    </script>
</body>
</html>
